<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="不要歧视、少抱怨、别硬碰硬、别贬低别人工作、互相帮助！"><title>获取iOS设备信息 | 葛镇榕的博客</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">获取iOS设备信息</h1><a id="logo" href="/.">葛镇榕的博客</a><p class="description">没有人能阻止你成功 除了你自己</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索..."></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">获取iOS设备信息</h1><div class="post-meta"><span class="date">Dec 03, 2016</span><span class="category"><a href="/categories/iOS/">iOS</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i> Hits</i></i></span><a href="/2016/12/03/获取iOS设备信息/#comments" class="comment-count">留言</a></div><div class="post-content"><p><center>获取iOS设备信息</center><br><a id="more"></a></p>
<p>获取设备上的一些信息</p>
<ul>
<li><p>获取电池电量(一般用百分数表示,大家自行处理就好)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-(<span class="built_in">CGFloat</span>)getBatteryQuantity</div><div class="line">&#123;    </div><div class="line">    <span class="keyword">return</span> [[<span class="built_in">UIDevice</span> currentDevice] batteryLevel];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>获取电池状态(UIDeviceBatteryState为枚举类型)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-(<span class="built_in">UIDeviceBatteryState</span>)getBatteryStauts</div><div class="line">&#123;    </div><div class="line">    <span class="keyword">return</span> [<span class="built_in">UIDevice</span> currentDevice].batteryState;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>获取总内存大小</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">long</span> <span class="keyword">long</span>)getTotalMemorySize</div><div class="line">&#123;    </div><div class="line">    <span class="keyword">return</span> [<span class="built_in">NSProcessInfo</span> processInfo].physicalMemory;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>获取当前可用内存</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">long</span> <span class="keyword">long</span>)getAvailableMemorySize</div><div class="line">&#123;</div><div class="line">    vm_statistics_data_t vmStats;</div><div class="line">    mach_msg_type_number_t infoCount = HOST_VM_INFO_COUNT;</div><div class="line">    kern_return_t kernReturn = host_statistics(mach_host_self(), HOST_VM_INFO, (host_info_t)&amp;vmStats, &amp;infoCount);</div><div class="line">    <span class="keyword">if</span> (kernReturn != KERN_SUCCESS)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">NSNotFound</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ((vm_page_size * vmStats.free_count + vm_page_size * vmStats.inactive_count));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>获取已使用内存</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">double</span>)getUsedMemory</div><div class="line">&#123;</div><div class="line">  task_basic_info_data_t taskInfo;</div><div class="line">  mach_msg_type_number_t infoCount = TASK_BASIC_INFO_COUNT;</div><div class="line">  kern_return_t kernReturn = task_info(mach_task_self(), </div><div class="line">                                       TASK_BASIC_INFO, </div><div class="line">(task_info_t)&amp;taskInfo, </div><div class="line">                                       &amp;infoCount);</div><div class="line">  <span class="keyword">if</span> (kernReturn != KERN_SUCCESS</div><div class="line">      ) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">NSNotFound</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> taskInfo.resident_size;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>获取总磁盘容量</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">include </div><div class="line">-(<span class="keyword">long</span> <span class="keyword">long</span>)getTotalDiskSize</div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> statfs buf;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> freeSpace = <span class="number">-1</span>;</div><div class="line">    <span class="keyword">if</span> (statfs(<span class="string">"/var"</span>, &amp;buf) &gt;= <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        freeSpace = (<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)(buf.f_bsize * buf.f_blocks);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> freeSpace;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>获取可用磁盘容量</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">long</span> <span class="keyword">long</span>)getAvailableDiskSize</div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> statfs buf;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> freeSpace = <span class="number">-1</span>;</div><div class="line">    <span class="keyword">if</span> (statfs(<span class="string">"/var"</span>, &amp;buf) &gt;= <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        freeSpace = (<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)(buf.f_bsize * buf.f_bavail);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> freeSpace;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>容量转换</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">-(<span class="built_in">NSString</span> )fileSizeToString:(<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)fileSize&#123;</div><div class="line">    <span class="built_in">NSInteger</span> KB = <span class="number">1024</span>;</div><div class="line">    <span class="built_in">NSInteger</span> MB = KB*KB;</div><div class="line">    <span class="built_in">NSInteger</span> GB = MB*KB;</div><div class="line">    <span class="keyword">if</span> (fileSize &lt; <span class="number">10</span>)  &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">@"0 B"</span>;</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (fileSize &lt; KB)    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">@"&lt; 1 KB"</span>;</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (fileSize &lt; MB)    &#123;</div><div class="line">        <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%.1f KB"</span>,((<span class="built_in">CGFloat</span>)fileSize)/KB];</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (fileSize &lt; GB)    &#123;</div><div class="line">        <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%.1f MB"</span>,((<span class="built_in">CGFloat</span>)fileSize)/MB];</div><div class="line">    &#125;<span class="keyword">else</span>   &#123;</div><div class="line">         <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%.1f GB"</span>,((<span class="built_in">CGFloat</span>)fileSize)/GB];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>型号<br>import <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">NSString</span> *)getCurrentDeviceModel:(<span class="built_in">UIViewController</span> *)controller</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> mib[<span class="number">2</span>];</div><div class="line">    size_t len;</div><div class="line">    <span class="keyword">char</span> *machine;</div><div class="line">    mib[<span class="number">0</span>] = <span class="built_in">CTL_HW</span>;</div><div class="line">    mib[<span class="number">1</span>] = HW_MACHINE;</div><div class="line">    sysctl(mib, <span class="number">2</span>, <span class="literal">NULL</span>, &amp;len, <span class="literal">NULL</span>, <span class="number">0</span>);</div><div class="line">    machine = malloc(len);</div><div class="line">    sysctl(mib, <span class="number">2</span>, machine, &amp;len, <span class="literal">NULL</span>, <span class="number">0</span>);</div><div class="line">    <span class="built_in">NSString</span> *platform = [<span class="built_in">NSString</span> stringWithCString:machine encoding:<span class="built_in">NSASCIIStringEncoding</span>];</div><div class="line">    free(machine);</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone3,1"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 4 (A1332)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone3,2"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 4 (A1332)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone3,3"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 4 (A1349)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone4,1"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 4s (A1387/A1431)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone5,1"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 5 (A1428)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone5,2"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 5 (A1429/A1442)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone5,3"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 5c (A1456/A1532)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone5,4"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 5c (A1507/A1516/A1526/A1529)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone6,1"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 5s (A1453/A1533)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone6,2"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 5s (A1457/A1518/A1528/A1530)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone7,1"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 6 Plus (A1522/A1524)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone7,2"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 6 (A1549/A1586)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone8,1"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 6s"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPhone8,2"</span>]) <span class="keyword">return</span> <span class="string">@"iPhone 6s Plus"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPod1,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPod Touch 1G (A1213)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPod2,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPod Touch 2G (A1288)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPod3,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPod Touch 3G (A1318)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPod4,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPod Touch 4G (A1367)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPod5,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPod Touch 5G (A1421/A1509)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad1,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 1G (A1219/A1337)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad2,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 2 (A1395)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad2,2"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 2 (A1396)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad2,3"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 2 (A1397)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad2,4"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 2 (A1395+New Chip)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad2,5"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Mini 1G (A1432)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad2,6"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Mini 1G (A1454)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad2,7"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Mini 1G (A1455)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad3,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 3 (A1416)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad3,2"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 3 (A1403)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad3,3"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 3 (A1430)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad3,4"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 4 (A1458)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad3,5"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 4 (A1459)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad3,6"</span>])   <span class="keyword">return</span> <span class="string">@"iPad 4 (A1460)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad4,1"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Air (A1474)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad4,2"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Air (A1475)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad4,3"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Air (A1476)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad4,4"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Mini 2G (A1489)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad4,5"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Mini 2G (A1490)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"iPad4,6"</span>])   <span class="keyword">return</span> <span class="string">@"iPad Mini 2G (A1491)"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"i386"</span>])      <span class="keyword">return</span> <span class="string">@"iPhone Simulator"</span>;</div><div class="line">    <span class="keyword">if</span> ([platform isEqualToString:<span class="string">@"x86_64"</span>])    <span class="keyword">return</span> <span class="string">@"iPhone Simulator"</span>;</div><div class="line">    <span class="keyword">return</span> platform;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>可以根据自己的需求增改。有人说也可以按照手机屏幕来判断，但5和5s/5c等手机屏幕相同尺寸则无法判断。。。我只做了iPhone的机型，所以iPad和iPod Touch的信息并没有更新到最新，也请朋友们补充。</p>
<ul>
<li><p>IP地址<br>#import 和#import</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSString</span> *)deviceIPAdress &#123;</div><div class="line">    <span class="built_in">NSString</span> *address = <span class="string">@"an error occurred when obtaining ip address"</span>;</div><div class="line">    <span class="keyword">struct</span> ifaddrs *interfaces = <span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">struct</span> ifaddrs *temp_addr = <span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">int</span> success = <span class="number">0</span>;</div><div class="line">    success = getifaddrs(&amp;interfaces);</div><div class="line">    <span class="keyword">if</span> (success == <span class="number">0</span>) &#123; <span class="comment">// 0 表示获取成功</span></div><div class="line">        temp_addr = interfaces;</div><div class="line">        <span class="keyword">while</span> (temp_addr != <span class="literal">NULL</span>) &#123;</div><div class="line">            <span class="keyword">if</span>( temp_addr-&gt;ifa_addr-&gt;sa_family == AF_INET) &#123;</div><div class="line">                <span class="comment">// Check if interface is en0 which is the wifi connection on the iPhone</span></div><div class="line">                <span class="keyword">if</span> ([[<span class="built_in">NSString</span> stringWithUTF8String:temp_addr-&gt;ifa_name] isEqualToString:<span class="string">@"en0"</span>]) &#123;</div><div class="line">                    <span class="comment">// Get NSString from C String</span></div><div class="line">                    address = [<span class="built_in">NSString</span> stringWithUTF8String:inet_ntoa(((<span class="keyword">struct</span> sockaddr_in *)temp_addr-&gt;ifa_addr)-&gt;sin_addr)];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            temp_addr = temp_addr-&gt;ifa_next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    freeifaddrs(interfaces);</div><div class="line">    <span class="keyword">return</span> address;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>当前手机连接的WIFI名称(SSID)<br>需要#import </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSString</span> *)getWifiName</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span> *wifiName = <span class="literal">nil</span>;</div><div class="line">    <span class="built_in">CFArrayRef</span> wifiInterfaces = <span class="built_in">CNCopySupportedInterfaces</span>();</div><div class="line">    <span class="keyword">if</span> (!wifiInterfaces) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSArray</span> *interfaces = (__bridge <span class="built_in">NSArray</span> *)wifiInterfaces;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *interfaceName <span class="keyword">in</span> interfaces) &#123;</div><div class="line">        <span class="built_in">CFDictionaryRef</span> dictRef = <span class="built_in">CNCopyCurrentNetworkInfo</span>((__bridge <span class="built_in">CFStringRef</span>)(interfaceName));</div><div class="line">        <span class="keyword">if</span> (dictRef) &#123;</div><div class="line">            <span class="built_in">NSDictionary</span> *networkInfo = (__bridge <span class="built_in">NSDictionary</span> *)dictRef;</div><div class="line">            wifiName = [networkInfo objectForKey:(__bridge <span class="built_in">NSString</span> *)kCNNetworkInfoKeySSID];</div><div class="line">            <span class="built_in">CFRelease</span>(dictRef);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">CFRelease</span>(wifiInterfaces);</div><div class="line">    <span class="keyword">return</span> wifiName;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</div><div class="tags"><a href="/tags/iOS/">iOS</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2016/12/09/iOS线上修复bug/" class="pre">iOS线上修复bug</a><a href="/2016/12/02/CocoaPods遇到的坑/" class="next">CocoaPods遇到的坑</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/01/07/CocoaPods-升级报错/">CocoaPods 升级报错</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/06/命令Xcode自动打包/">命令Xcode自动打包</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/07/对时间的归档/">对时间的归档</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/07/iOS9以上的系统判断设备上是否有安装某app/">iOS9以上的系统判断设备上是否有安装某app</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/16/App应用内地图跳转/">App应用内地图跳转</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/04/iOS多图片下载/">iOS多图片下载</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/25/数据库操作/">数据库操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/24/iPhone-X-设计适配指南和iOS-11-新特性/">iPhone X 设计适配指南和iOS 11 新特性</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/23/iOS推送集成/">iOS推送集成</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/21/ReactiveCocoa上手/">ReactiveCocoa上手</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CocoaPods/">CocoaPods</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git流程/">git流程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/文件操作/">文件操作</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/经验总结/">经验总结</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/CocoaPods/" style="font-size: 15px;">CocoaPods</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/文件操作/" style="font-size: 15px;">文件操作</a> <a href="/tags/学习/" style="font-size: 15px;">学习</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/归档/" style="font-size: 15px;">归档</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://baiduhidevios.github.io/2017/05/07/2017-05-07%E6%8A%80%E6%9C%AF%E5%91%A8%E6%8A%A5/" title="百度技术周报" target="_blank">百度技术周报</a><ul></ul><a href="http://blog.csdn.net/q199109106q/article/details/8615661" title="MJ的博客" target="_blank">MJ的博客</a><ul></ul><a href="https://github.com/ChenYilong" title="iOS程序犭袁" target="_blank">iOS程序犭袁</a><ul></ul><a href="http://ios.jobbole.com/84388/" title="iOS 开源库" target="_blank">iOS 开源库</a><ul></ul><a href="http://blog.devtang.com/" title="唐巧的博客" target="_blank">唐巧的博客</a><ul></ul><a href="hhttp://blog.cnbang.net/archives/" title="腾讯大牛(bang's)" target="_blank">腾讯大牛(bang's)</a><ul></ul><a href="http://www.skyfox.org/" title="天狐博客" target="_blank">天狐博客</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">greatrong.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>